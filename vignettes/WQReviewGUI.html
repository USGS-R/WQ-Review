<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />

<meta name="viewport" content="width=device-width, initial-scale=1">

<meta name="author" content="T. Joe Mills and Colin Penn" />

<meta name="date" content="2018-10-01" />

<title>WQReview GUI User Guide</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>



<link href="data:text/css;charset=utf-8,body%20%7B%0Abackground%2Dcolor%3A%20%23fff%3B%0Amargin%3A%201em%20auto%3B%0Amax%2Dwidth%3A%20700px%3B%0Aoverflow%3A%20visible%3B%0Apadding%2Dleft%3A%202em%3B%0Apadding%2Dright%3A%202em%3B%0Afont%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0Afont%2Dsize%3A%2014px%3B%0Aline%2Dheight%3A%201%2E35%3B%0A%7D%0A%23header%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0A%23TOC%20%7B%0Aclear%3A%20both%3B%0Amargin%3A%200%200%2010px%2010px%3B%0Apadding%3A%204px%3B%0Awidth%3A%20400px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Aborder%2Dradius%3A%205px%3B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Afont%2Dsize%3A%2013px%3B%0Aline%2Dheight%3A%201%2E3%3B%0A%7D%0A%23TOC%20%2Etoctitle%20%7B%0Afont%2Dweight%3A%20bold%3B%0Afont%2Dsize%3A%2015px%3B%0Amargin%2Dleft%3A%205px%3B%0A%7D%0A%23TOC%20ul%20%7B%0Apadding%2Dleft%3A%2040px%3B%0Amargin%2Dleft%3A%20%2D1%2E5em%3B%0Amargin%2Dtop%3A%205px%3B%0Amargin%2Dbottom%3A%205px%3B%0A%7D%0A%23TOC%20ul%20ul%20%7B%0Amargin%2Dleft%3A%20%2D2em%3B%0A%7D%0A%23TOC%20li%20%7B%0Aline%2Dheight%3A%2016px%3B%0A%7D%0Atable%20%7B%0Amargin%3A%201em%20auto%3B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dcolor%3A%20%23DDDDDD%3B%0Aborder%2Dstyle%3A%20outset%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0Aborder%2Dwidth%3A%202px%3B%0Apadding%3A%205px%3B%0Aborder%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dstyle%3A%20inset%3B%0Aline%2Dheight%3A%2018px%3B%0Apadding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0Aborder%2Dleft%2Dstyle%3A%20none%3B%0Aborder%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20thead%2C%20table%20tr%2Eeven%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Ap%20%7B%0Amargin%3A%200%2E5em%200%3B%0A%7D%0Ablockquote%20%7B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Apadding%3A%200%2E25em%200%2E75em%3B%0A%7D%0Ahr%20%7B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%3A%20none%3B%0Aborder%2Dtop%3A%201px%20solid%20%23777%3B%0Amargin%3A%2028px%200%3B%0A%7D%0Adl%20%7B%0Amargin%2Dleft%3A%200%3B%0A%7D%0Adl%20dd%20%7B%0Amargin%2Dbottom%3A%2013px%3B%0Amargin%2Dleft%3A%2013px%3B%0A%7D%0Adl%20dt%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Aul%20%7B%0Amargin%2Dtop%3A%200%3B%0A%7D%0Aul%20li%20%7B%0Alist%2Dstyle%3A%20circle%20outside%3B%0A%7D%0Aul%20ul%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Apre%2C%20code%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0Aborder%2Dradius%3A%203px%3B%0Acolor%3A%20%23333%3B%0Awhite%2Dspace%3A%20pre%2Dwrap%3B%20%0A%7D%0Apre%20%7B%0Aborder%2Dradius%3A%203px%3B%0Amargin%3A%205px%200px%2010px%200px%3B%0Apadding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Acode%20%7B%0Afont%2Dfamily%3A%20Consolas%2C%20Monaco%2C%20%27Courier%20New%27%2C%20monospace%3B%0Afont%2Dsize%3A%2085%25%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0Apadding%3A%202px%200px%3B%0A%7D%0Adiv%2Efigure%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF%3B%0Apadding%3A%202px%3B%0Aborder%3A%201px%20solid%20%23DDDDDD%3B%0Aborder%2Dradius%3A%203px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Amargin%3A%200%205px%3B%0A%7D%0Ah1%20%7B%0Amargin%2Dtop%3A%200%3B%0Afont%2Dsize%3A%2035px%3B%0Aline%2Dheight%3A%2040px%3B%0A%7D%0Ah2%20%7B%0Aborder%2Dbottom%3A%204px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Apadding%2Dbottom%3A%202px%3B%0Afont%2Dsize%3A%20145%25%3B%0A%7D%0Ah3%20%7B%0Aborder%2Dbottom%3A%202px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Afont%2Dsize%3A%20120%25%3B%0A%7D%0Ah4%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23f7f7f7%3B%0Amargin%2Dleft%3A%208px%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Ah5%2C%20h6%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23ccc%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%230033dd%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Ahover%20%7B%0Acolor%3A%20%236666ff%3B%20%7D%0Aa%3Avisited%20%7B%0Acolor%3A%20%23800080%3B%20%7D%0Aa%3Avisited%3Ahover%20%7B%0Acolor%3A%20%23BB00BB%3B%20%7D%0Aa%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0Aa%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%20code%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%0A" rel="stylesheet" type="text/css" />

</head>

<body>




<h1 class="title toc-ignore">WQReview GUI User Guide</h1>
<h4 class="author"><em>T. Joe Mills and Colin Penn</em></h4>
<h4 class="date"><em>2018-10-01</em></h4>


<div id="TOC">
<ul>
<li><a href="#suggested-wqreview-and-qwdata-workflow-for-flipping-dqi-codes">Suggested WQReview and QWDATA workflow for flipping DQI codes</a><ul>
<li><a href="#wqreview">WQReview</a></li>
<li><a href="#qwdata---consult-with-your-wq-specialist-and-data-base-administrator-about-your-wsc-practices-for-batch-file-changes-in-qwdata.">QWDATA - Consult with your WQ Specialist and Data Base Administrator about your WSC practices for batch file changes in QWDATA.</a></li>
</ul></li>
<li><a href="#importing-data">Importing Data</a><ul>
<li><a href="#data-import-options">Data import options</a></li>
<li><a href="#a-basic-data-import">A basic data import</a></li>
</ul></li>
<li><a href="#plot-descriptions">Plot descriptions</a><ul>
<li><a href="#symbology">Symbology</a></li>
<li><a href="#labelling-conventions">Labelling conventions</a></li>
<li><a href="#selecting-data-to-plot">Selecting data to plot</a></li>
<li><a href="#global-plot-controls">Global plot controls</a><ul>
<li><a href="#new-data-threshold">New data threshold</a></li>
<li><a href="#record-highlights">Record highlights</a></li>
<li><a href="#plot-clicking-brushing-and-hovering">Plot clicking, brushing, and hovering</a></li>
</ul></li>
<li><a href="#plot-types">Plot types</a><ul>
<li><a href="#timeseries">Timeseries</a></li>
<li><a href="#seasonal-plot">Seasonal plot</a></li>
<li><a href="#parameter-parameter-plot">Parameter-parameter plot</a></li>
<li><a href="#charge-balance-timeseries">Charge balance timeseries</a></li>
<li><a href="#ions-vs-conductance">Ions vs conductance</a></li>
<li><a href="#rep-parm-boxplot">Rep-parm boxplot</a></li>
<li><a href="#blank-sample-detections">Blank sample detections</a></li>
</ul></li>
</ul></li>
<li><a href="#tables">Tables</a><ul>
<li><a href="#auto-flagged-samples">Auto-flagged samples</a><ul>
<li><a href="#dqi-needs-review">DQI needs review</a></li>
<li><a href="#ready-for-dqi-change">Ready for DQI change</a></li>
<li><a href="#chemical-sense">Chemical sense</a></li>
<li><a href="#charge-balance-issues">Charge balance issues</a></li>
<li><a href="#whole-vs-part">Whole vs Part</a></li>
<li><a href="#pesticide-flags">Pesticide flags</a></li>
<li><a href="#replicate-table">Replicate table</a></li>
<li><a href="#blank-table">Blank table</a></li>
<li><a href="#all-charge-balance">All charge balance</a></li>
<li><a href="#data-by-result">Data by result</a></li>
<li><a href="#data-by-sample">Data by sample</a></li>
</ul></li>
<li><a href="#qwsample-and-qwresult">qwsample and qwresult</a></li>
<li><a href="#data-and-qaqc-tables">Data and QAQC tables</a></li>
<li><a href="#flag-descriptions">Flag descriptions</a><ul>
<li><a href="#sc_badlabvsfield">SC_badLabVSField</a></li>
<li><a href="#section">30.01.</a></li>
<li><a href="#ph-higher-than-expected">30.02. pH higher than expected</a></li>
<li><a href="#dissolved-oxygen-higher-than-expected">30.03. Dissolved Oxygen higher than expected</a></li>
<li><a href="#greater-than-max-value-in-old-data">30.11. Greater than max value in old data</a></li>
<li><a href="#less-than-min-value-in-old-data">30.12. Less than min value in old data</a></li>
<li><a href="#schedule-2437-pesticide-hits-greater-than-max-hits-in-old-data">30.13. Schedule 2437 Pesticide hits greater than max hits in old data</a></li>
<li><a href="#less-than-minimum-pesticide-hits-in-old-data">30.14 Less than minimum pesticide hits in old data</a></li>
<li><a href="#greater-than-99p-in-old-data">30.15. Greater than 99p in old data</a></li>
<li><a href="#less-than-1p-in-old-data">30.16. Less than 1p in old data</a></li>
<li><a href="#questionable-cation-anion-balance">30.21. Questionable cation-anion balance</a></li>
</ul></li>
</ul></li>
</ul>
</div>

<div id="suggested-wqreview-and-qwdata-workflow-for-flipping-dqi-codes" class="section level1">
<h1>Suggested WQReview and QWDATA workflow for flipping DQI codes</h1>
<div id="wqreview" class="section level2">
<h2>WQReview</h2>
<ol style="list-style-type: decimal">
<li>Use WQReview to pull data of interest.</li>
<li>Review the Excel workbook tables and WQReview plots as part of your result review.</li>
<li>Copy results that have been reviewed from the Excel “DQI needs review” tab to the “Ready for DQI change”.</li>
<li>Based on your review, add the new DQI code (R, Q, etc.) to the “DQI_CD_REVIEWED” column.</li>
<li>Add any review comments to be added to NWIS in the “RESULT_CM_NWIS_REVIEWED” column.</li>
<li>Put the comment type (F for field or L for Lab) in the “RESULT_CM_TYPE_REVIEWED” column.</li>
<li>Add any additional comments to the “RESULT_NOTES_WQREVIEW” column. These will not appeded into NWIS, they will only be saved when the Excel workbook is saved.</li>
<li>Under the WQReview “Generate batch DQI flip files” header, hit the “Generate batch files” button. A qwsample and qwresult tab will be generated in the Excel workbook.</li>
<li>Using Windows Explorer, create or navigate to a project folder in your mapped home directory on NWIS. Save the Excel workbook here.</li>
<li>Copy everything but the column titles from the qwsample and qwresult Excel workbook tabs and paste them into seperate files using a text editor (Notepad, Notepad++, Wordpad) and save them in the project folder as qwsample and qwresult files. Some WQ Specialists prefer the qwsample and qwresult file to have a username and date/time stamp appended to the file name. E.g. qwsample_tmills_20181001</li>
</ol>
</div>
<div id="qwdata---consult-with-your-wq-specialist-and-data-base-administrator-about-your-wsc-practices-for-batch-file-changes-in-qwdata." class="section level2">
<h2>QWDATA - Consult with your WQ Specialist and Data Base Administrator about your WSC practices for batch file changes in QWDATA.</h2>
<ol style="list-style-type: decimal">
<li>Using a Unix window (ReflectionX, PuTTY) navigate to your project folder in your home directory on NWIS. Launch QWDATA from this location.</li>
<li>In the QWDATA menu, select option 8 - Batch Processing</li>
<li>In the Batch Processing menu, select option 4 - Enter batch-file data with user-specified behavior</li>
<li>Modify the following:</li>
</ol>
<ul>
<li><ol start="2" style="list-style-type: decimal">
<li>Transactions allowed: 4. Verification Only, no transaction stored</li>
</ol></li>
<li><ol start="3" style="list-style-type: decimal">
<li>Results protected by DQI: No</li>
</ol></li>
<li>any other options if desired</li>
</ul>
<ol style="list-style-type: decimal">
<li>Hit Enter to continue. A watlist will be created in your project folder and your qwsample and qwresult files will have a datetime stamp .YYYYMMDD.HHMMSS appended to them.</li>
<li>Review the watlist to be sure that the desired changes could take place and no unexpected changes will occur. Append “verification” to the watlist file name.</li>
<li>Remove the datetime stamp from the qwsample and qwresult files.</li>
<li>Re-run the Batch Processing with the following:</li>
</ol>
<ul>
<li><ol start="2" style="list-style-type: decimal">
<li>Transactions allowed: 1. Only updated to samples (QWCARDSIN)</li>
</ol></li>
<li><ol start="3" style="list-style-type: decimal">
<li>Results protected by DQI: No</li>
</ol></li>
<li>any other options if desired</li>
</ul>
<ol style="list-style-type: decimal">
<li>Hit Enter to continue. Another watlist will be created with the changes you have made to results in NWIS.</li>
</ol>
</div>
</div>
<div id="importing-data" class="section level1">
<h1>Importing Data</h1>
<p>This will describe the process for importing data into the WQReview Graphical User Interface (GUI). We will start by importing data for a single site using predefined NWIS parameter groups. ##Load the WQReview package and open the WQReview GUI</p>
<ol style="list-style-type: decimal">
<li>Load the WQReview package by typing the following into your R script or command window:</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(WQReview)</code></pre></div>
<ol style="list-style-type: decimal">
<li>To open the GUI run the WQReviewGUI() function.</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">WQReviewGUI</span>()</code></pre></div>
<p>The GUI window will open in your system’s default internet browser. <strong>It is recommended that the GUI be run in Google Chrome.</strong> If the GUI opens in internet explorer, you need to change your system’s default browser to Google Chrome by opening Google Chrome and going to settings -&gt; default browser (bottom of page).</p>
<div id="data-import-options" class="section level2">
<h2>Data import options</h2>
<p>The data import tab has 10 main inputs. A description of the input is given when the input is hovered over with the mouse cursor.</p>
<ol style="list-style-type: decimal">
<li><p><strong>Site number</strong>: This input takes a manually entered site number(s). Type the site number in and click “add”. You may add as many site numbers as you would like. Remove a site number by clicking it and hitting the backspace or delete keys. Alternatively, click in the box and press the backspace key to incrementally remove the numbers starting with the last entry.</p></li>
<li><p><strong>Site number file</strong>: This input takes a file of site IDs. The file must be a single column text file of site numbers. Make sure leading zero’s have not been removed if using excel to generate the file.</p></li>
<li><p><strong>Parameter codes</strong>: This input takes a manually entered parameter codes (pcodes). This behaves the same as the site number input.</p></li>
<li><p><strong>Parameter groups</strong>: This input is used to select NWIS parameter groups to retrieve, rather than explicitly selecting individual pcodes.</p></li>
<li><p><strong>pCode file</strong>: This input takes a file of pcodes. The file must be a single column text file of pcodes. Make sure leading zero’s have not been removed if using excel to generate the file.</p></li>
<li><p><strong>Start date</strong>: The start date for the data pull. Samples collected after this date will be retrieved. The default value is 10 years before the current date.</p></li>
<li><p><strong>End date</strong>: The end date for the data pull. Samples collected before this date will be retrieved. The default is the current date.</p></li>
<li><p><strong>Server name (DSN)</strong>: The name of your nwis server data source name (DSN) that was established during ODBC setup.</p></li>
<li><p><strong>Environmental DB number</strong>: The number cooresponding to the environmental database. Default is “01”</p></li>
<li><p><strong>QA DB Number</strong>: The number cooresponding to the QA sample database. Default is “02”</p></li>
</ol>
</div>
<div id="a-basic-data-import" class="section level2">
<h2>A basic data import</h2>
<p>We will start with a basic data import for a single site by parameter groups.</p>
<ol style="list-style-type: decimal">
<li>Double check that your server name and database numbers are correct for your data.</li>
<li>Type a site ID into the site number input box and click “add”.</li>
<li><p>Select “All” parameter groups from the Parameter groups select box to pull data for all parameters or select a specific group of parameters. **Beware, if pulling selected groups of parameters (e.g. “cations”) chargebalance may not be able to be calculated.</p></li>
<li>Leave the date range input unchanged to pull the last 10 years of data or enter a date range in the date range input to pull a subset of the data.</li>
<li>Click the “Get data” button to import the data.</li>
<li>A dialogue box and status bar describing the import process will appear in the bottom right corner of the GUI.</li>
<li>A Microsoft Excel workbook window will pop-up and populate with tabs of reports.</li>
<li><p>Once data has been retrieved, text will be displayed listing the results of the data import. This can take a few seconds after the Excel workbook populates to show up.</p></li>
</ol>
<p>If you encounter issues with the data import, send an email to <a href="mailto:cpenn@usgs.gov">cpenn@usgs.gov</a> and/or post an issue on the WQReview GitHub page at <a href="https://github.com/USGS-R/WQ-Review/issues">WQ-Review Issues</a></p>
<p>We can now begin to work with the data.</p>
</div>
</div>
<div id="plot-descriptions" class="section level1">
<h1>Plot descriptions</h1>
<p>This section will describe the plot types available in the WQReview GUI and the various ways to manipulate them.</p>
<div id="symbology" class="section level2">
<h2>Symbology</h2>
<p>The symbology in all plots is sensitive to the medium code and remark code. Data colors are mapped to the medium code and point data symbols are mapped to the remark code.</p>
<p>Currently supported medium codes include:</p>
<ol style="list-style-type: decimal">
<li>WS</li>
<li>WG</li>
<li>OA</li>
<li>WSQ</li>
<li>WGQ</li>
<li>OAQ</li>
</ol>
<p>Currently supported remark codes include:</p>
<ol style="list-style-type: decimal">
<li>No remark code (listed as “Sample” in legend)</li>
<li>&lt;</li>
<li>‘&gt;’</li>
<li>E</li>
</ol>
</div>
<div id="labelling-conventions" class="section level2">
<h2>Labelling conventions</h2>
<p>All axis pertaining to a particular pcode will be labelled with that pcode’s NWIS parameter name, which includes the units of measurement. The main title of the plot will either by labelled with the NWIS station name if only one station is plotted, or “multi-site plot” if multiple stations are displayed.</p>
</div>
<div id="selecting-data-to-plot" class="section level2">
<h2>Selecting data to plot</h2>
<p>Generally, plots are controlled by selecting a site and then a data type from an input box or pick list. In most cases the plot will be displayed or refreshed automatically. <strong>PLOTS WILL NOT BE DISPLAYED IF A SITE AND DATA TYPE ARE NOT SELECTED EVEN IF ONLY ONE SITE OR DATA TYPE IS PRESENT</strong>. Additionally, a plot will not be displayed if there are no data to plot, for example if a particular parameter was not measured at a selected site but is selected for plotting. Multiple sites of multiple parameters can be plotted on certain plot types.</p>
</div>
<div id="global-plot-controls" class="section level2">
<h2>Global plot controls</h2>
<div id="new-data-threshold" class="section level3">
<h3>New data threshold</h3>
<p>Point data in all plots can be labeled as “New” data based off of when that data was last modified using the “New data threshold” date input. Any data modified after the date indicated in the text box will be labeled as “New”. This helps identify data that has not been reviewed from historic data when the data are not displayed as a timeseries. Note that the “New data threshold” is determined from when data were last <strong>modified</strong> for result-level plots (e.g. timeseries, seasonal, etc.) not when they were created. Sample-level plots (e.g. charge balance) are labeled new according to the sample collection date.</p>
</div>
<div id="record-highlights" class="section level3">
<h3>Record highlights</h3>
<p>Samples or results will be highlighted with a red halo if that sample or result has been selected in the data table.</p>
</div>
<div id="plot-clicking-brushing-and-hovering" class="section level3">
<h3>Plot clicking, brushing, and hovering</h3>
<p>Most plots are interactive in that the user can hover on a point to see information, or zoom into specific areas of the plot. Boxplots are not interactive.</p>
<div id="brushing" class="section level4">
<h4>Brushing</h4>
<p>In interactive plots, the user may also select an area of the plot by holding down a mouse click and drawing a rectangle around the area of interest. A new plot will appear below, zoomed into the area of interest.</p>
</div>
<div id="hovering" class="section level4">
<h4>Hovering</h4>
<p>Hovering the mouse over any given data point will display basic information about the data point.</p>
</div>
</div>
</div>
<div id="plot-types" class="section level2">
<h2>Plot types</h2>
<p>This section will describe the details of each different plot type and how to control them in the WQReview GUI.</p>
<div id="timeseries" class="section level3">
<h3>Timeseries</h3>
<p>This generates a plot of a selected parameter through time.</p>
<div id="uses" class="section level4">
<h4>Uses</h4>
<ul>
<li>Identifying general trends at a site through time.</li>
<li>Identifying temporal outliers.</li>
</ul>
</div>
<div id="data-selection-options" class="section level4">
<h4>Data selection options</h4>
<ul>
<li>Select one or multiple sites</li>
<li>Select only one parameter from the dropdown list or in linked data table in Chrome.</li>
</ul>
</div>
<div id="plot-controls" class="section level4">
<h4>Plot controls</h4>
<ul>
<li>Multi-site options: Plot all sites on one plot (multisite) or plot sites on individual side-by-side plots (facet).</li>
<li>Add LOESS: Adds a locally weighted scatterplot smooth and shaded 95% confidence interval around the smooth</li>
<li>Display hydrograph: displays the instantaneous hydrograph if data are available under parameter code “00061”</li>
<li>Label DQI: Superimposes the sample DQI_CD over the point</li>
</ul>
</div>
</div>
<div id="seasonal-plot" class="section level3">
<h3>Seasonal plot</h3>
<p>This generates a seasonal timeseries of parameter value by day of year (DOY) to examine seasonality in parameter values.</p>
<div id="uses-1" class="section level4">
<h4>Uses</h4>
<ul>
<li>Identifying seasonality in parameter values.</li>
<li>Identifying seasonal outliers.</li>
</ul>
</div>
<div id="data-selection-options-1" class="section level4">
<h4>Data selection options</h4>
<ul>
<li>Select one or multiple sites</li>
<li>Select only one parameter</li>
</ul>
</div>
<div id="plot-controls-1" class="section level4">
<h4>Plot controls</h4>
<ul>
<li>Multi-site options: Plot all sites on one plot (multisite) or plot sites on individual side-by-side plots (facet).</li>
<li>Add LOESS: Adds a locally weighted scatterplot smooth and shaded 95% confidence interval around the smooth</li>
<li>Label DQI: Superimposes the sample DQI_CD over the point</li>
</ul>
</div>
</div>
<div id="parameter-parameter-plot" class="section level3">
<h3>Parameter-parameter plot</h3>
<p>This generates an x-y plot of a selected parameter vs another selected parameter. The two side-by-side plots default to the selected parameter vs. discharge and vs. Specific Conductance.</p>
<div id="uses-2" class="section level4">
<h4>Uses</h4>
<ul>
<li>Identifying relationships between parameters.</li>
<li>Identifying outliers in related parameters.</li>
</ul>
</div>
<div id="data-selection-options-2" class="section level4">
<h4>Data selection options</h4>
<ul>
<li>Select one or multiple sites</li>
<li>Select only one parameter per axis</li>
</ul>
</div>
<div id="plot-controls-2" class="section level4">
<h4>Plot controls</h4>
<ul>
<li>Multi-site options: Plot all sites on one plot (multisite) or plot sites on individual side-by-side plots (facet).</li>
<li>Add linear fit: Add a linear regression line to the x-y data.</li>
<li>Log 10 scale: This plots parameter values on a log10 scale.</li>
</ul>
</div>
</div>
<div id="charge-balance-timeseries" class="section level3">
<h3>Charge balance timeseries</h3>
<p>This pane generates a timeseries plot of charge balance percent difference. The plot is annotated with a horizontal dashed line indicating the range of +- 5% and a solid line indicating the range of +- 10%. Symbol type indicates if enough major elements were analyzed to constitute a roughly complete balance. For example, a sample missing calcium would be given a symbol of “Incomplete” because it is a major constituent in the charge balance, but a sample missing fluoride would still be given a “Complete” symbol because it is only a minor constituent of the charge balance.</p>
<div id="uses-3" class="section level4">
<h4>Uses</h4>
<ul>
<li>Obtaining a quick visual snapshot of charge imbalance at a site.</li>
<li>Identifying charge imbalance issues with current data and comparing to historic chargebalance behavior.</li>
</ul>
</div>
<div id="data-selection-options-3" class="section level4">
<h4>Data selection options</h4>
<ul>
<li>Select one or multiple sites</li>
</ul>
</div>
<div id="plot-controls-3" class="section level4">
<h4>Plot controls</h4>
<ul>
<li>Multi-site options: Plot all sites on one plot (multisite) or plot sites on individual side-by-side plots (facet).</li>
</ul>
</div>
</div>
<div id="ions-vs-conductance" class="section level3">
<h3>Ions vs conductance</h3>
<p>This generates a x-y plot of sum of cations or anions vs conductance. The ratio of the sum of cations or anions vs specific conductance generally falls within a range of 0.92 - 1.24 for natural waters. The shaded region on the plot indicates this typical range. These are the values used in QWData for alert limits, see QWData documentation and references therein for further explanation.</p>
<p>At many sites, there will be a roughly linear relationship between the sum of cations or anions vs. conductance. If a point falls above or below the general trend line, this is an indication that the particular group of ions is either to low or too high.</p>
<div id="uses-4" class="section level4">
<h4>Uses</h4>
<ul>
<li>Identifying samples that fall outside of the typical range of rations of ions/specific conductance.</li>
<li>Identifying which group of ions, cations or anions, are responsible for charge imbalance issues.</li>
</ul>
</div>
<div id="data-selection-options-4" class="section level4">
<h4>Data selection options</h4>
<ul>
<li>Select one or multiple sites</li>
</ul>
</div>
<div id="plot-controls-4" class="section level4">
<h4>Plot controls</h4>
<ul>
<li>Multi-site options: Plot all sites on one plot (multisite) or plot sites on individual side-by-side plots (facet).</li>
</ul>
</div>
</div>
<div id="rep-parm-boxplot" class="section level3">
<h3>Rep-parm boxplot</h3>
<p>This pane generates a plot of replicate relative percent difference for all replicates analyzed at a given site, organized by DQI code. <strong>READ THE FOLLOWING ON REPLICATE PAIRING</strong></p>
<p>Replicate pairs are identified as follows:</p>
<ol style="list-style-type: decimal">
<li>An environmental sample is a sample with medium code of WS or WG and a sample type of 7.</li>
<li>A replicate sample is a sample with a medium code of WSQ or WGQ and a sample type of 7.</li>
<li>An environmental-replicate pair is defined as a replicate sample collected at the same site as an environmental sample on the same day.</li>
</ol>
<p><strong>NOTE THAT CENSORED RESULTS ARE GIVEN THE CENSORED VALUE FOR CALCULATIONS. DO NOT INTERPRET REPLICATE ANALYSES BASED ENTIRELY OFF OF THE RELATIVE PERCENT DIFFERENCE PLOT. SEE REPLICATE TABLE AS WELL.</strong></p>
<div id="uses-5" class="section level4">
<h4>Uses</h4>
<ul>
<li>Assessing general replicate agreement at a site for multiple parameters.</li>
<li>Comparing current replicate analyses to historic agreement.</li>
</ul>
</div>
<div id="data-selection-options-5" class="section level4">
<h4>Data selection options</h4>
<ul>
<li>Select one or multiple sites</li>
<li>Select one parameter</li>
</ul>
</div>
<div id="plot-controls-5" class="section level4">
<h4>Plot controls</h4>
<ul>
<li>Multi-site options: Plot all sites on one plot (multisite) or plot sites on individual side-by-side plots (facet).</li>
</ul>
</div>
</div>
<div id="blank-sample-detections" class="section level3">
<h3>Blank sample detections</h3>
<p>This pane generates a box plot of parameter values for blanks above reporting level, organized by DQI code.</p>
<div id="uses-6" class="section level4">
<h4>Uses</h4>
<ul>
<li>Identifying systematic detections in blank samples of unapproved data compared to approved detections.</li>
</ul>
</div>
<div id="data-selection-options-6" class="section level4">
<h4>Data selection options</h4>
<ul>
<li>Select one or multiple sites</li>
<li>Select one parameter</li>
</ul>
</div>
<div id="plot-controls-6" class="section level4">
<h4>Plot controls</h4>
<ul>
<li>Multi-site options: Plot all sites on one plot (multisite) or plot sites on individual side-by-side plots (facet).</li>
</ul>
</div>
</div>
</div>
</div>
<div id="tables" class="section level1">
<h1>Tables</h1>
<p>This section will describe the various tables generated by the WQReview GUI and output to an Excel Workbook tab.</p>
<div id="auto-flagged-samples" class="section level2">
<h2>Auto-flagged samples</h2>
<p>During data import, samples or results are auto-flagged following criteria developed by NAWQA for all water-quality data, and are defined at the end of this manual. For any flags comparing an unapproved sample to historic data, the current sample is compared only to all REVIEWED AND ACCEPTED data in the pull time windowdata rather than all prior samples in time. This is because data that have not been reviewed and accepted could themselves be problematic.</p>
<div id="dqi-needs-review" class="section level3">
<h3>DQI needs review</h3>
<p>This tab contains all samples in the data pull with a DQI code S, I, or P, and any flags based on comparisons to approved data (see NWIS 30.xx flags below). This tab is dynamically linked to the Chrome browser GUI Result-level review tab. Samples in the Excel tab can be sorted or deleted and the resulting format will appear in the lower lefthand table in Chrome when the “Refresh from excel” button is clicked. Filtering on columns in Excel is not recommended as it is not dynamically linked and can cause errors if rows are deleted while in a filtered state.</p>
</div>
<div id="ready-for-dqi-change" class="section level3">
<h3>Ready for DQI change</h3>
<p>This tab starts with column headers and empty rows. As records are reviewed in the “Unapproved data” tab, they can be copied and pasted into this tab, with columns for the new reviewed DQI code and comments. Any records in the tab will be used to create qwsample and qwresult tabs in Excel when the “Generate batch files” button is clicked in Chrome.</p>
</div>
<div id="chemical-sense" class="section level3">
<h3>Chemical sense</h3>
<p>This table contains basic chemical checks similar to those provided by the QWDATA unix software. The first 7 columns contain sample-level information and the remaining columns contain flags with the column name coorresponding to the particular data check. If a sample fails a given data check, a flag is applied to the respective column for that sample. See NWIS 30.xx flag descriptions below for more information.</p>
</div>
<div id="charge-balance-issues" class="section level3">
<h3>Charge balance issues</h3>
<p>This tab contains flags related to charge balance check 30.21 described below. It is also dynamically linked to the table found under the “Troubleshoot charge balance” tab in Chrome.</p>
</div>
<div id="whole-vs-part" class="section level3">
<h3>Whole vs Part</h3>
<p>This tab compares samples with filtered and unfiltered constituents and flags samples based on the filtered and unfiltered result values.</p>
</div>
<div id="pesticide-flags" class="section level3">
<h3>Pesticide flags</h3>
<p>This table contains flags for evaluating number of pesticide hits in schedule 2437. If there are too many or too few hits in the current sample compared to historic data, the sample gets flagged.</p>
</div>
<div id="replicate-table" class="section level3">
<h3>Replicate table</h3>
<p>This table contains all replicate pairs based on the criteria as the Rep-parm boxplot described above. It flags samples based on Relative Percent Difference.</p>
</div>
<div id="blank-table" class="section level3">
<h3>Blank table</h3>
<p>This table summerizes all blank samples in the pulled data, organized by parameter.</p>
</div>
<div id="all-charge-balance" class="section level3">
<h3>All charge balance</h3>
<p>This table is a “wide” format of all sample charge balance data, including cation and anion sums, individual consitutent values, and general flags for samples with charge imbalance.</p>
</div>
<div id="data-by-result" class="section level3">
<h3>Data by result</h3>
<p>This table contains all data pulled from NWIS in the “long” format, ie. by record number, parameter code, and result value.</p>
</div>
<div id="data-by-sample" class="section level3">
<h3>Data by sample</h3>
<p>This table contains all data pulled from NWIS in the “wide” format, ie. by record number date/time and all associated parameter result values.</p>
</div>
</div>
<div id="qwsample-and-qwresult" class="section level2">
<h2>qwsample and qwresult</h2>
<p>These tabs will be present when the “Generate batch files” button is pressed in Chrome. See “Ready for DQI change” above. The tabs can copied and saved into text files for modifying DQI codes and comments with QWDATA. To regenerate the tabs if more results have been added to the “Ready for DQI change” tab, delete the current qwsample and qwresult tabs and hit the “Generate batch files” button again.</p>
</div>
<div id="data-and-qaqc-tables" class="section level2">
<h2>Data and QAQC tables</h2>
<p>These tables are controlled similarly to the auto-flagged tables except that they can be generated according to site and date selection criteria. These tables include standard data tables, a wide (sample-result) and a long (by result) format table. 4 QAQC tables are also presented, including a chargebalance table, a table of replicate agreement, a summary table of blank detections, and a table comparing filtered ot unfiltered values. The last column of each of these QAQC tables contains a column with flags if a particular sample violates some standard QAQC measure. For example, a sample with a charge imbalance &gt; 10% would get a flag in the final column of hte chargebalance table. <strong>The blank summary table is calculated on the fly given the input criteria</strong> For example, leaving the default date range (last 3 years) in the blank table input and selecting a site would summarize the blank detections for that 3 year period for that site.</p>
</div>
<div id="flag-descriptions" class="section level2">
<h2>Flag descriptions</h2>
<div id="sc_badlabvsfield" class="section level3">
<h3>SC_badLabVSField</h3>
<p>The difference between Lab SC (90095) and field SC (00095) is greater than 10%</p>
</div>
<div id="section" class="section level3">
<h3>30.01.</h3>
<p>pH lower than expected Every water-quality sample (environmental and QC) had its pH (p00400) checked for appropriate ranges. If the pH value is less than 4.5, the sample is flagged for 30.01.</p>
</div>
<div id="ph-higher-than-expected" class="section level3">
<h3>30.02. pH higher than expected</h3>
<p>Every water-quality sample (environmental and QC) had its pH (p00400) checked for appropriate ranges. If the pH value is higher than 9, the sample is flagged for 30.02.</p>
</div>
<div id="dissolved-oxygen-higher-than-expected" class="section level3">
<h3>30.03. Dissolved Oxygen higher than expected</h3>
<p>Every water-quality sample (environmental and QC) had its dissolved oxygen (p00300) checked for appropriate ranges. If the D.O. value is higher than 25, the sample is flagged for 30.03.</p>
</div>
<div id="greater-than-max-value-in-old-data" class="section level3">
<h3>30.11. Greater than max value in old data</h3>
<p>New Environmental samples are compared to “old” environmental samples at the same site from water-year 1996 and later, for pesticides, nutrients, field parameters, and major ions. When a parameter has 5 or more “old” values at the site, and a new sample has a new maximum for that parameter, that sample and parameter are flagged for 30.11. Pesticides in Schedule 2437 which existed in the earlier schedules 2033 or 2060 (under different pcodes) are compared to the older pcodes as well as the Schedule 2437 pcodes.</p>
</div>
<div id="less-than-min-value-in-old-data" class="section level3">
<h3>30.12. Less than min value in old data</h3>
<p>New Environmental samples are compared to “old” environmental samples at the same site from water-year 1996 and later, for pesticides, nutrients, field parameters, and major ions. When a parameter has 5 or more “old” values at the site, and a new sample has a new minimum for that parameter, that sample and parameter are flagged for 30.12. Pesticides in Schedule 2437 which existed in the earlier schedules 2033 or 2060 (under different pcodes) are compared to the older pcodes as well as the Schedule 2437 pcodes.</p>
</div>
<div id="schedule-2437-pesticide-hits-greater-than-max-hits-in-old-data" class="section level3">
<h3>30.13. Schedule 2437 Pesticide hits greater than max hits in old data</h3>
<p>The number of Schedule 2437 pesticide hits in new environmental samples is compared to 2437 pesticide hits in “old” environmental samples at the same site from water-year 2013 and later (the year Schedule 2437 began). When a site has 5 or more “old” pesticide samples and a new sample has a new maximum number of pesticide hits, that sample is flagged for 30.13. Only pesticides in Schedule 2437 are counted as hits.</p>
</div>
<div id="less-than-minimum-pesticide-hits-in-old-data" class="section level3">
<h3>30.14 Less than minimum pesticide hits in old data</h3>
<p>The number of Schedule 2437 pesticide hits in new environmental samples is compared to 2437 pesticide hits in “old” environmental samples at the same site from water-year 2013 and later (the year Schedule 2437 began). When a site has five or more “old” pesticide samples and a new sample has a new minimum number of pesticide hits, that sample is flagged for 30.14. Only pesticides in Schedule 2437 are counted as hits.</p>
</div>
<div id="greater-than-99p-in-old-data" class="section level3">
<h3>30.15. Greater than 99p in old data</h3>
<p>New Environmental samples are compared to “old” environmental samples at the same site from water-year 1996 and later, for pesticides, nutrients, field parameters, and major ions. When a parameter has 24 or more “old” values at the site, and a new sample has a value greater than the 99th percentile of the “old” data set for that parameter, that sample and parameter are flagged for 30.15. Pesticides in Schedule 2437 which existed in the earlier schedules 2033 or 2060 (under different pcodes) are compared to the older pcodes as well as the Schedule 2437 pcodes.</p>
</div>
<div id="less-than-1p-in-old-data" class="section level3">
<h3>30.16. Less than 1p in old data</h3>
<p>New Environmental samples are compared to “old” environmental samples at the same site from water-year 1996 and later, for pesticides, nutrients, field parameters, and major ions. When a parameter has 24 or more “old” values at the site, and a new sample has a value less than the 1st percentile of the “old” data set for that parameter, that sample and parameter are flagged for 30.15. Pesticides in Schedule 2437 which existed in the earlier schedules 2033 or 2060 (under different pcodes) are compared to the older pcodes as well as the Schedule 2437 pcodes.</p>
</div>
<div id="questionable-cation-anion-balance" class="section level3">
<h3>30.21. Questionable cation-anion balance</h3>
<p>For each environmental sample, the cation-anion percent difference was be calculated (using the same formula, but a slightly simpler procedure, than what NWIS-QWDATA uses) and compared to the value for specific conductance (P00095). The cation-anion ballance is flagged for 30.21 if any of the following conditions is true 1. specific conductance is less than or equal to 100 microsiemens/cm, AND percent difference is greater (in absolute value) than +/- 15 percent 2. specific conductance is greater than 100 and less than or equal to 1000 microsiemens/cm, AND percent difference is greater (in absolute value) than +/- 10 percent 3. specific conductance is greater than 1000 microsiemens/cm, AND percent difference is greater (in absolute value) than +/- 5 percent</p>
</div>
</div>
</div>



<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
